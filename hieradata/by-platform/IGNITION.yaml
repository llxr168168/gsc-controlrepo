
  
samba::shares:
  ignition:
    - comment = Ignition
    - valid users = @SW\gg-adm-gcdunix @SW\gg-cgit-watson
    - path = /swpkg/ignition
    - force user = ignition
    - writable = yes
    - create mask = 2770
    - directory mask = 2770
  backups:
    - comment = backups
    - valid users = @SW\gg-adm-gcdunix @SW\gg-cgit-watson
    - path = /swdata/ignition
    - force user = ignition
    - writable = yes
    - create mask = 2770
    - directory mask = 2770

access_conf::access:
  - '+:root:LOCAL'
  - "+:SW\\%{hiera('sw_snow_disc:snow_user')}:%{hiera('access_conf::snow_ips')}"
  - "+:%{hiera('sw_puppet_ansible:ansible_user')}:%{hiera('access_conf::ansible_ips')}"
  - "+:sa-indapps-devopsadm:10.148.19.50 10.148.5.225 10.148.38.91"
  - '+:ignition:LOCAL cgwatsondr.consumer.sherwin.com'
  - '+:zabbix:LOCAL'
  - '+:(sa-local):LOCAL'
  - '+:(sa-remote):ALL'
  - '+:(SW\DL_ADMIN_%{::hostname_upcase}):ALL'
  - '+:(SW\gg-adm-gcdunix):ALL'
  - "+:SW\\sa-qualys-linux:%{hiera('access_conf::qualys_ips')}"
  - "+:SW\\sa-cyberark-linux:%{hiera('access_conf::cyberark_ips')}" 
  - '-:ALL:ALL'

classes:
  - profiles_unix::gsc::apps::ignition_app

hosts::hosts_group: ignition

    # Sudo config
    file{'/etc/sudoers.d/ignition':
      ensure  => present,
      source  =>  'puppet:///modules/sw_ignition8_v2/ignition.sudo',
      mode    => '0400',
      owner   => 'root',
      group   => 'root',
    }
      ### sa-indapps-devopsadm file setup   
    file{'/home/sa-indapps-devopsadm/':
      ensure => directory,
      mode   => '0700',
      owner  => sa-indapps-devopsadm,
      group  => gg-adm-nogroup,
    }
    file{'/home/sa-indapps-devopsadm/.ssh':
      ensure => directory,
      mode   => '0700',
      owner  => sa-indapps-devopsadm,
      group  => gg-adm-nogroup,
    }
    file{'/home/sa-indapps-devopsadm/.ssh/authorized_keys':
      ensure  => present,
      source  =>  'puppet:///modules/sw_ignition8_v2/sa-indapps-devopsadm-authorized_keys',
      mode    => '0600',
      owner   => sa-indapps-devopsadm,
      group   => gg-adm-nogroup,
    }
